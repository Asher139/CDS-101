---
title: "Final Project"
author: "MinJae Jo"
date: "`r Sys.Date()`"
documentclass: article
geometry: margin=1in
fontsize: 11pt
output:
  pdf_document:
    toc: false
    df_print: kable
    fig_caption: false
    number_sections: false
    dev: pdf
    highlight: tango
  html_document:
    theme: default
    self_contained: true
    toc: false
    df_print: kable
    fig_caption: false
    number_sections: false
    smart: true
    dev: svg
---

```{r setup, include = FALSE}
# DO NOT ALTER THIS CHUNK
# Set knitr options
knitr::opts_chunk$set(
  echo = TRUE,
  eval = TRUE,
  fig.width = 5,
  fig.asp = 0.618,
  out.width = "70%",
  dpi = 120,
  fig.align = "center",
  cache = FALSE
)
# Load required packages
suppressPackageStartupMessages(library(tidyverse))
suppressPackageStartupMessages(library(infer))
suppressPackageStartupMessages(library(modelr))
suppressPackageStartupMessages(library(broom))
# Load dataset
college <- read_rds("college.rds") %>%
  type_convert(
    na=combine("", "NA", "PrivacySuppressed")
  )
# Set seed
set.seed(98261936)
```

## Introduction

For this project, I am looking at the question: “Does the size or competitiveness of a college affect its degree attainment rate?” I chose C150_4 as my response variable because it shows the share of students who finish their degree within 150% of the usual time. It is one of the clearer numbers in the dataset that relates to graduation.

For the explanatory variable, I am using SAT_AVG. The SAT score is not exactly the same as college size, but schools with higher SAT averages usually have more selective admissions and sometimes bigger or more competitive environments. So I thought it could work as a way to compare colleges that are different in scale or difficulty.

Both variables are continuous, so I am planning to use a linear model to see if they move together in some way. I think this topic is interesting. People often talk about whether large schools or hard-to-select schools help students succeed, but it is hard to know without seeing the data in person. I would like to see what the CollegeScorecard dataset actually shows.

## Preprocessing
```{r, echo=FALSE}
college_reduced <- college %>%
  select(C150_4, SAT_AVG)
college_reduced <- college_reduced %>%
  rename(
    grad_rate_150 = C150_4,
    sat_avg = SAT_AVG
  )
summary(college_reduced)
```


## Visualization
### Summary statistics for graduation rate (C150_4)
```{r, echo=FALSE, warning=FALSE}
college_reduced %>%
  summarise(
    n_grad = n(),
    mean_grad = mean(grad_rate_150, na.rm = TRUE),
    median_grad = median(grad_rate_150, na.rm = TRUE),
    sd_grad = sd(grad_rate_150, na.rm = TRUE),
    iqr_grad = IQR(grad_rate_150, na.rm = TRUE),
    min_grad = min(grad_rate_150, na.rm = TRUE),
    max_grad = max(grad_rate_150, na.rm = TRUE)
  )
```
-The graduation rate values range from 0 to 1. The median is around 0.49, so about half of the colleges graduate less than half of their students on time. This suggests that many schools are kind of in the middle rather than extremely high or low.



### Summary statistics for SAT_AVG
```{r, echo=FALSE, warning=FALSE}
college_reduced %>%
  summarise(
    n_sat = n(),
    mean_sat = mean(sat_avg, na.rm = TRUE),
    median_sat = median(sat_avg, na.rm = TRUE),
    sd_sat = sd(sat_avg, na.rm = TRUE),
    iqr_sat = IQR(sat_avg, na.rm = TRUE),
    min_sat = min(sat_avg, na.rm = TRUE),
    max_sat = max(sat_avg, na.rm = TRUE)
  )

```
-The SAT averages go from the mid-500s to around 1550. The median is about 1116, which means most schools are not super selective, but not weak either. The scores are pretty spread out, so colleges in this dataset vary a lot in competitiveness.



### Graduation Rate of Histogram
```{r, echo=FALSE, warning=FALSE}
ggplot(college_reduced, aes(x = grad_rate_150)) +
  geom_histogram(binwidth = 0.05, fill = "skyblue", color = "black") +
  labs(
    title = "Distribution of Graduation Rate (within 150% time)",
    x = "Graduation Rate (C150_4)",
    y = "Count"
  )
```
-The graduation rate histogram shows that most colleges have graduation rates clustered around the middle, roughly between 0.3 and 0.7. The highest bars appear near the center, which means many schools graduate around half of their students within 150% of the normal time. Very low and very high rates exist, but they are much less common.


### SAT Average of Histogram
```{r, echo=FALSE, warning=FALSE}
ggplot(college_reduced, aes(x = sat_avg)) +
  geom_histogram(binwidth = 50, fill = "lightgreen", color = "black") +
  labs(
    title = "Distribution of SAT Average Scores",
    x = "SAT Average",
    y = "Count"
  )
```
-The SAT average scores form a distribution that looks close to a normal shape. Most schools have SAT averages between about 1000 and 1200, and the center is around 1100. There are a few schools with much lower or much higher scores, but overall the scores are tightly grouped, suggesting similar academic selectivity for many colleges.


### Graduation Rate of Boxplot
```{r, echo=FALSE, warning=FALSE}
ggplot(college_reduced, aes(y = grad_rate_150)) +
  geom_boxplot(fill = "orange") +
  labs(
    title = "Boxplot of Graduation Rate",
    y = "Graduation Rate"
  )
```
-The boxplot shows that the middle half of graduation rates is fairly wide, meaning schools vary a lot. The median is close to the middle of the box, so the distribution is balanced. There are also some lower values stretching down toward 0, showing that a number of colleges have low graduation performance.

## Summary Statistics
### Graduation Rate Summary
```{r, echo=FALSE, warning=FALSE}
college_reduced %>% 
  summarise(
    n_grad = n(),
    mean_grad = mean(grad_rate_150, na.rm = TRUE),
    median_grad = median(grad_rate_150, na.rm = TRUE),
    sd_grad = sd(grad_rate_150, na.rm = TRUE),
    iqr_grad = IQR(grad_rate_150, na.rm = TRUE),
    min_grad = min(grad_rate_150, na.rm = TRUE),
    max_grad = max(grad_rate_150, na.rm = TRUE)
  )
```
### SAT Summary
```{r, echo=FALSE, warning=FALSE}
college_reduced %>% 
  summarise(
    n_sat = n(),
    mean_sat = mean(sat_avg, na.rm = TRUE),
    median_sat = median(sat_avg, na.rm = TRUE),
    sd_sat = sd(sat_avg, na.rm = TRUE),
    iqr_sat = IQR(sat_avg, na.rm = TRUE),
    min_sat = min(sat_avg, na.rm = TRUE),
    max_sat = max(sat_avg, na.rm = TRUE)
  )
```
## Data Analysis
```{r, echo=FALSE, warning=FALSE}
model <- lm(grad_rate_150 ~ sat_avg, data = college_reduced)
tidy(model)
glance(model)
```

```{r, echo=FALSE, warning=FALSE}
college_model <- college_reduced %>% 
  drop_na(grad_rate_150, sat_avg)
model <- lm(grad_rate_150 ~ sat_avg, data = college_model)
tidy(model)
glance(model)
```
-Overall, linear models show a slight positive correlation between the SAT averages and graduation rates. Higher SAT averages tend to have slightly higher graduation rates, but R squared values are not very high. This suggests that SAT scores alone do not fully explain graduation scores, and other factors are likely to play a large role.

### Observed vs Predicted Plot
```{r, echo=FALSE, warning=FALSE}
college_model$predicted <- predict(model)

ggplot(college_model, aes(x = predicted, y = grad_rate_150)) +
  geom_point(alpha = 0.4, color = "steelblue") +
  geom_abline(intercept = 0, slope = 1, color = "red") +
  labs(
    title = "Observed vs Predicted Graduation Rate",
    x = "Predicted Graduation Rate",
    y = "Observed Graduation Rate"
  ) +
  theme_minimal()
```
-This graph compares the actual graduation rate with the one predicted by the model. A closer the dot is to the diagonal line (red line), the closer it is to the line in general, but not quite the same. In other words, the SAT averages account for graduation rates to some extent, but show that there are quite a few other effects.

### Residuals vs Predicted plot
```{r, echo=FALSE, warning=FALSE}

college_model$residuals <- resid(model)
ggplot(college_model, aes(x = predicted, y = residuals)) +
  geom_point(alpha = 0.4, color = "orange") +
  geom_hline(yintercept = 0, color = "red") +
  labs(
    title = "Residuals vs Predicted",
    x = "Predicted Graduation Rate",
    y = "Residuals"
  ) +
  theme_minimal()
```
-The residual graph is used to check whether the error is uniformly spread according to the predicted value.
Here, the dots are scattered around the centerline, but they also show some patterns, so they are not completely ideal.
This means that the linear model does not account for all the variations.

### Q-Q plot
```{r, echo=FALSE, warning=FALSE}
ggplot(college_model, aes(sample = residuals)) +
  stat_qq(color = "darkgreen") +
  stat_qq_line(color = "red") +
  labs(
    title = "Q-Q Plot of Model Residuals",
    x = "Theoretical Quantiles",
    y = "Sample Quantiles"
  ) +
  theme_minimal()
```
-A Q-Q plot is a graph that verifies that the residuals are normally distributed. Although the points are usually on a straight line, they appear to deviate slightly from the ends. In other words, the model's assumption of normality is not significantly broken, but it is not a perfect fit.










## Conclusion